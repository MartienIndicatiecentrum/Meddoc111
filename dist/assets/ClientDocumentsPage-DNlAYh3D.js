import{r as a,j as e,F as x,B as u,D as h,s as p,b as g}from"./index-CZ4i9qr6.js";const f=({clientId:n})=>{const[c,d]=a.useState([]),[m,r]=a.useState(!0),[t,i]=a.useState(null);return a.useEffect(()=>{n&&(async()=>{r(!0);const{data:l,error:o}=await p.from("documents").select("id, title, type, category, status, created_at, file_path, file_size, client_id, date").eq("client_id",n).order("created_at",{ascending:!1});o?(console.error("Error fetching client documents:",o),g.error("Kon documenten niet laden"),d([])):l&&(console.log("Client documents fetched:",l.length,"documents"),d(l)),r(!1)})()},[n]),n?m?e.jsx("div",{className:"p-8",children:"Bezig met laden..."}):e.jsxs("div",{className:"max-w-3xl mx-auto mt-8 bg-white rounded shadow p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Documenten van cliënt"}),c.length===0?e.jsx("div",{children:"Geen documenten gevonden."}):e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Document"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Datum"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Acties"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map(s=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap flex items-center",children:[e.jsx(x,{className:"h-5 w-5 text-gray-400 mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:s.title})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:s.status}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(s.created_at).toLocaleDateString("nl-NL")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsx(u,{variant:"ghost",size:"sm",onClick:()=>{console.log("🔍 Bekijk button clicked in ClientDocumentsPage, document:",s),i(s)},children:"Bekijken"})})]},s.id))})]}),e.jsx(h,{open:!!t,onClose:()=>{console.log("🚪 ClientDocumentsPage modal closing"),i(null)},document:t}),t&&e.jsxs("div",{className:"fixed bottom-4 right-4 bg-green-200 border border-green-400 p-3 rounded text-xs z-[70] max-w-sm",children:[e.jsx("div",{className:"font-semibold mb-2",children:"🔧 ClientDocumentsPage Debug"}),e.jsxs("div",{children:["Modal should be open: ",t?"YES":"NO"]}),e.jsxs("div",{children:["Document ID: ",t.id]}),e.jsxs("div",{children:["Document title: ",t.title]}),e.jsxs("div",{children:["File path: ",t.file_path||"ONTBREEKT"]}),e.jsxs("div",{children:["Document type: ",t.type]}),e.jsx("button",{onClick:()=>i(null),className:"mt-2 text-xs bg-green-600 text-white px-2 py-1 rounded",children:"Close Debug"})]})]}):e.jsx("div",{className:"p-8",children:"Geen cliënt geselecteerd."})};export{f as default};
